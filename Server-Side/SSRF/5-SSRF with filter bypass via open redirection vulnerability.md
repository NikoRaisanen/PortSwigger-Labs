# Lab: SSRF with filter bypass via open redirection vulnerability

>This lab has a stock check feature which fetches data from an internal system.

>To solve the lab, change the stock check URL to access the admin interface at http://192.168.0.12:8080/admin and delete the user carlos.

>The stock checker has been restricted to only access the local application, so you will need to find an open redirect affecting the application first.

### Oberservations
I could not exploit this lab by including my own `path` parameter in the body of `POST /product/stock`...

Looks like that request does not support the `path` parameter. I clicked around the product page and looked at the requests. Interestingly, I saw this GET request when I clicked on "next product":

`GET /product/nextProduct?currentProductId=1&path=/product?productId=2`

I set the redirect path to `http://facebook.com` to see if we can redirect to whatever resource we want, and this request worked! Unfortunately, redirecting to `192.168.0.12` did not work since this is an internal IP address

### Solution
Let's see how we can use the above GET request that uses the param `path` to access the admin page from the stockApi...

In the `POST /product/stock` request, change the `stockApi` param value to `/product/nextProduct?currentProductId=1&path=http://192.168.0.12:8080/admin/delete?username=carlos`

This works because the `stockApi` creates a request to an internal api, so we are then able to access the admin panel hosted at `192.168.0.12`